(()=>{"use strict";!function(e){const t=document.querySelector(".act");t.innerHTML="",[{name:"Activity 1",time:"Morning",description:"Description of Activity 1"},{name:"Activity 2",time:"Afternoon",description:"Description of Activity 2"}].forEach((e=>{const n=document.createElement("div");n.classList.add("activities"),n.innerHTML=`\n      <img src="../src/images/activity-placeholder.jpg" class="activity-img">\n      <div class="activityinfo">\n        <h5 class="activity-name">${e.name}</h5>\n        <small class="time-rec">Recommended time: ${e.time}</small>\n        <p class="activity-desc">${e.description}</p>\n      </div>\n    `,t.appendChild(n)}))}();const e="71a1d54910fc34b8989358aaf59ab093",t="https://api.openweathermap.org/data/2.5/",n=document.querySelector(".search-input");function r(e){const t=new Date(1e3*e);return`${t.getHours()}:${t.getMinutes().toString().padStart(2,"0")}`}n.addEventListener("keypress",(r=>{13===r.keyCode&&(async function(n){try{const r=await fetch(`${t}weather?q=${n}&units=metric&APPID=${e}`),o=await r.json();a(o)}catch(e){console.error("Error fetching weather data:",e)}}(n.value),n.value="")}));const a=n=>{const a=document.querySelector(".location .city");console.log(a),a.innerText=`${n.name}, ${n.sys.country}`,document.querySelector(".hi-low").innerText=`${Math.round(n.main.temp_min)}°c / ${Math.round(n.main.temp_max)}°c`;const c=new Date;document.querySelector(".location .date").innerText=i(c);const s=document.querySelector(".location .time");console.log(s),s.innerText=o(c,n.timezone);const l=document.querySelector(".current .temp"),u=l.querySelector("span");let d=!0,m=n.main.temp;const h=()=>{var e;d?(e=m,m=Math.round(1.8*e+32),u.textContent="°F",g.style.color="antiquewhite",y.style.color="#05D3A2"):(m=n.main.temp,u.textContent="°C",g.style.color="#05D3A2",y.style.color="antiquewhite"),l.innerHTML=`${Math.round(m)}<span>${u.textContent}</span>`,d=!d},g=document.querySelector(".celcius"),y=document.querySelector(".farenheit");g.addEventListener("click",h),y.addEventListener("click",h),h(),document.querySelector(".current .weather").innerText=n.weather[0].main;const p=document.getElementById("weatherImage"),w=n.weather[0].main.toLowerCase();console.log("Weather condition:",w),p.src=function(e){switch(e){case"thunderstorm":return"../src/images/thunderstorm.png";case"drizzle":return"../src/images/drizzle.png";case"rain":return"../src/images/rain.png";case"snow":return"../src/images/snow.png";case"clear":return"../src/images/clear.png";case"clouds":return"../src/images/clouds.png";case"sunny":return"../src/images/sunny.png";case"windy":return"../src/images/windy.png";case"mist":return"../src/images/mist.png";case"fog":return"../src/images/fog.png";case"haze":return"../src/images/haze.png";default:return"../src/images/default.png"}}(w),document.querySelector(".sunrise small").innerHTML=`${r(n.sys.sunrise)} AM <i class="fas fa-sun"></i>`,document.querySelector(".sunset small").innerHTML=`${r(n.sys.sunset)} PM <i class="fas fa-moon"></i>`,document.querySelector(".wind small").innerHTML=`${n.wind.speed} km/h <i class="fas fa-wind"></i>`,document.querySelector(".humidity small").innerHTML=`${n.main.humidity}% <i class="fas fa-droplet"></i>`,async function(n,a){try{const o=await fetch(`${t}onecall?lat=${n}&lon=${a}&exclude=current,minutely,daily&units=metric&appid=${e}`);!function(e){const t=(new Date).getDate(),n=document.getElementById("hourlyForecast");n.innerHTML="",e.forEach((e=>{const a=new Date(1e3*e.dt);if(a.getDate()===t&&a.getHours()%2==0){const t=r(e.dt),a=Math.round(e.temp),o=e.weather[0].icon,i=document.createElement("div");i.classList.add("time-block"),i.innerHTML=`\n        <div class="time">${t}</div>\n        <div class="weather-image">\n          <img src="http://openweathermap.org/img/wn/${o}.png" alt="Weather Icon">\n        </div>\n        <div>${a}°C</div>\n      `,n.appendChild(i)}}))}((await o.json()).hourly)}catch(e){console.error("Error fetching hourly weather data:",e)}}(n.coord.lat,n.coord.lon),async function(n,r){try{const a=await fetch(`${t}onecall?lat=${n}&lon=${r}&exclude=current,minutely,hourly&units=metric&appid=${e}`);!function(e){const t=document.getElementById("weeklyForecast");t.innerHTML="",e.forEach((e=>{const n=(r=e.dt,new Date(1e3*r).toLocaleDateString("en-US",{weekday:"short"}));var r;const a=Math.round(e.temp.min),o=Math.round(e.temp.max),i=e.weather[0].icon,c=document.createElement("div");c.classList.add("time-block"),c.innerHTML=`\n      <div class="time">${n}</div>\n      <div class="weather-image">\n        <img src="http://openweathermap.org/img/wn/${i}.png" alt="Weather Icon">\n      </div>\n      <div class="hi-low">${a}°C / ${o}°C</div>\n    `,t.appendChild(c)}))}((await a.json()).daily)}catch(e){console.error("Error fetching weekly weather data:",e)}}(n.coord.lat,n.coord.lon),async function(e){try{const t=`The weather in your location is ${e.weather[0].description} with a temperature of ${e.main.temp}°C and humidity of ${e.main.humidity}%. Based on this weather, suggest some activities.`,n=await fetch("https://api.openai.com/v1/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({weather:e.weather[0].main,temperature:e.main.temp,humidity:e.main.humidity,prompt:t})});return await n.json()}catch(e){return console.error("Error fetching activity suggestions:",e),[]}}(n).then((e=>{displayActivitySuggestions(e)}))};const o=(e,t)=>{const n=new Date(e.getTime()+1e3*t),r=n.getUTCHours(),a=n.getUTCMinutes();return`${r%12||12}:${a<10?`0${a}`:a} ${r>=12?"PM":"AM"}`},i=e=>`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]} ${e.getDate()} ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getFullYear()}`;async function c(n,r){try{const o=await fetch(`${t}weather?lat=${n}&lon=${r}&units=metric&APPID=${e}`),i=await o.json();a(i)}catch(e){console.error("Error fetching weather data:",e)}}"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;console.log("Latitude:",t),console.log("Longitude:",n),c(t,n)}),(n=>{console.error("Error getting user location:",n.message),async function(n,r){try{const n=`https://api.openweathermap.org/geo/1.0/reverse?lat=undefined&lon=undefined&limit=1&appid=${e}`,r=await fetch(n),o=(await r.json())[0].name,i=await fetch(`${t}weather?q=${o}&units=metric&APPID=${e}`),c=await i.json();a(c)}catch(e){console.error("Error fetching weather data for the nearest place:",e)}}()})):console.log("Geolocation is not supported by this browser."),navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;c(t,n)}),(e=>{console.error("Error getting user location:",e.message)}))})();