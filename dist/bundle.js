(()=>{const e="71a1d54910fc34b8989358aaf59ab093",t="https://api.openweathermap.org/data/2.5/",n=document.querySelector(".search-input");function r(e){const t=new Date(1e3*e);return`${t.getHours()}:${t.getMinutes().toString().padStart(2,"0")}`}n.addEventListener("keypress",(r=>{13===r.keyCode&&(async function(n){try{const r=await fetch(`${t}weather?q=${n}&units=metric&APPID=${e}`),o=await r.json();a(o)}catch(e){console.error("Error fetching weather data:",e)}}(n.value),n.value="")}));const a=e=>{const t=document.querySelector(".location .city");console.log(t),t.innerText=`${e.name}, ${e.sys.country}`;const n=new Date;document.querySelector(".location .date").innerText=s(n);const a=document.querySelector(".location .time");console.log(a),a.innerText=o(n,e.timezone);const c=document.querySelector(".current .temp"),i=c.querySelector("span");let u=!0,l=e.main.temp;const d=()=>{var t;u?(t=l,l=Math.round(1.8*t+32),i.textContent="°F"):(l=e.main.temp,i.textContent="°C"),c.innerHTML=`${Math.round(l)}<span>${i.textContent}</span>`,u=!u},g=document.querySelector(".celcius"),m=document.querySelector(".farenheit");g.addEventListener("click",d),m.addEventListener("click",d),d(),document.querySelector(".current .weather").innerText=e.weather[0].main;const y=document.getElementById("weatherImage"),h=e.weather[0].main.toLowerCase();console.log("Weather condition:",h),y.src=function(e){switch(e){case"thunderstorm":return"../src/images/thunderstorm.png";case"drizzle":return"../src/images/drizzle.png";case"rain":return"../src/images/rain.png";case"snow":return"../src/images/snow.png";case"clear":return"../src/images/clear.png";case"clouds":return"../src/images/clouds.png";case"sunny":return"../src/images/sunny.png";case"windy":return"../src/images/windy.png";case"mist":return"../src/images/mist.png";case"fog":return"../src/images/fog.png";case"haze":return"../src/images/haze.png";default:return"../src/images/default.png"}}(h),document.querySelector(".sunrise small").innerHTML=`${r(e.sys.sunrise)} AM <i class="fas fa-sun"></i>`,document.querySelector(".sunset small").innerHTML=`${r(e.sys.sunset)} PM <i class="fas fa-moon"></i>`,document.querySelector(".wind small").innerHTML=`${e.wind.speed} km/h <i class="fas fa-wind"></i>`,document.querySelector(".humidity small").innerHTML=`${e.main.humidity}% <i class="fas fa-droplet"></i>`},o=(e,t)=>{const n=new Date(e.getTime()+1e3*t),r=n.getUTCHours(),a=n.getUTCMinutes();return`${r%12||12}:${a<10?`0${a}`:a} ${r>=12?"PM":"AM"}`},s=e=>`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]} ${e.getDate()} ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getFullYear()}`;"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;console.log("Latitude:",t),console.log("Longitude:",n),getWeatherByCoords(t,n)}),(n=>{console.error("Error getting user location:",n.message),async function(n,r){try{const n=`https://api.openweathermap.org/geo/1.0/reverse?lat=undefined&lon=undefined&limit=1&appid=${e}`,r=await fetch(n),o=(await r.json())[0].name,s=await fetch(`${t}weather?q=${o}&units=metric&APPID=${e}`),c=await s.json();a(c)}catch(e){console.error("Error fetching weather data for the nearest place:",e)}}()})):console.log("Geolocation is not supported by this browser.")})();